# Nexus EE Design - Kubernetes Secrets
#
# This file contains secrets required by MAPOS and Gaming AI components.
#
# IMPORTANT: This file should be used as a template. DO NOT commit actual secrets!
#
# Usage:
#   # Option 1: Create secret from environment variable
#   kubectl create secret generic nexus-secrets \
#     --from-literal=OPENROUTER_API_KEY="$OPENROUTER_API_KEY" \
#     --from-literal=ANTHROPIC_API_KEY="$ANTHROPIC_API_KEY" \
#     -n nexus --dry-run=client -o yaml | kubectl apply -f -
#
#   # Option 2: Use envsubst with this file
#   export OPENROUTER_API_KEY="sk-or-..."
#   export ANTHROPIC_API_KEY="sk-ant-..."
#   envsubst < k8s/secrets.yaml | kubectl apply -f -
#
#   # Option 3: Create manually in cluster
#   kubectl create secret generic nexus-secrets -n nexus \
#     --from-literal=OPENROUTER_API_KEY="<your-key>"

apiVersion: v1
kind: Secret
metadata:
  name: nexus-api-keys
  namespace: nexus
  labels:
    app.kubernetes.io/name: nexus-api-keys
    app.kubernetes.io/part-of: nexus-ee-design
    app.kubernetes.io/managed-by: nexus-deployment-controller
  annotations:
    description: "API keys for LLM-powered optimization"
type: Opaque
stringData:
  # OpenRouter API key for LLM backend (Opus 4.6)
  # Used by: MAPOS, schematic assembly, smoke test agent
  # Get key from: https://openrouter.ai/keys
  openrouter-api-key: "${OPENROUTER_API_KEY}"

  # Anthropic API key (optional, for direct Claude access)
  # Used by: Direct Claude API calls (not through OpenRouter)
  # Get key from: https://console.anthropic.com/
  anthropic-api-key: "${ANTHROPIC_API_KEY}"

  # Nexar (Octopart) API credentials (optional, for datasheet search)
  # Used by: Symbol assembly agent -- datasheet discovery
  # Sign up free: https://portal.nexar.com/sign-up
  nexar-client-id: "${NEXAR_CLIENT_ID}"
  nexar-client-secret: "${NEXAR_CLIENT_SECRET}"

  # SnapEDA API key (optional, for KiCad symbol + datasheet search)
  # Used by: Symbol assembly agent -- symbol and datasheet discovery
  # Get key from: https://www.snapeda.com/get-api/
  snapeda-api-key: "${SNAPEDA_API_KEY}"

  # UltraLibrarian API key (optional, for KiCad symbol search)
  # Used by: Symbol assembly agent -- symbol discovery
  # Get key from: https://app.ultralibrarian.com/api
  ultralibrarian-api-key: "${ULTRALIBRARIAN_API_KEY}"

  # DigiKey API credentials (optional, for component/datasheet search)
  # Used by: Symbol assembly agent -- datasheet discovery
  # Register at: https://developer.digikey.com/
  digikey-client-id: "${DIGIKEY_CLIENT_ID}"
  digikey-client-secret: "${DIGIKEY_CLIENT_SECRET}"

  # Mouser API key (optional, for component/datasheet search)
  # Used by: Symbol assembly agent -- datasheet discovery
  # Register at: https://www.mouser.com/api-hub/
  mouser-api-key: "${MOUSER_API_KEY}"

---
# External Secrets Operator configuration (if using ESO)
# Uncomment this section if using External Secrets Operator for production
#
# apiVersion: external-secrets.io/v1beta1
# kind: ExternalSecret
# metadata:
#   name: nexus-secrets
#   namespace: nexus
# spec:
#   refreshInterval: "1h"
#   secretStoreRef:
#     name: vault-backend  # or your secret store
#     kind: ClusterSecretStore
#   target:
#     name: nexus-secrets
#     creationPolicy: Owner
#   data:
#     - secretKey: OPENROUTER_API_KEY
#       remoteRef:
#         key: nexus/api-keys
#         property: openrouter
#     - secretKey: ANTHROPIC_API_KEY
#       remoteRef:
#         key: nexus/api-keys
#         property: anthropic
